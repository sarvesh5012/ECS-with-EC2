# Service variables
namespace: "virtue"

environment: "dev"

# AWS credentials
region: "ap-southeast-1"

# Network variables
vpc_cidr_block: "10.0.0.0/16"

azs :
  - "ap-southeast-1a"
  - "ap-southeast-1b"
  - "ap-southeast-1c"
private_subnets : 
  - "10.0.1.0/24"
  - "10.0.2.0/24"
  - "10.0.3.0/24"
public_subnets : 
  - "10.0.101.0/24"
  - "10.0.102.0/24"
  - "10.0.103.0/24"

# EC2 Computing variables
instance_type: "t2.medium"

# ECS variables
containers:
  nginx:
    ecs_task_desired_count: 1
    image_uri: "nginx"
    container_port: 80
    cpu_units: 768
    memory: 768
    cpu_target_tracking_desired_value: 80
    memory_target_tracking_desired_value: 80
    custom_origin_host_header: 
      - "dev.virtues.agency"
      - "dev2.virtues.agency"
    healthcheck_endpoint: "/"
    health_check_enabled : true
    envs: 
      - name : "ENV_NAME"
        value : "Test-nginx"
    secrets:
      - name : "ENV_SEC"
        valueFrom : "arn:aws:secretsmanager:ap-southeast-1:711387124065:secret:NGINX_SVC_SECRETS_-d8sWH1"
    tags:
      - name: 
        key:
      - name:
        key:

  apache:
    ecs_task_desired_count: 1
    image_uri: "httpd"
    container_port: 80
    cpu_units: 1024
    memory: 1024
    cpu_target_tracking_desired_value: 80 #container target_value
    memory_target_tracking_desired_value: 80 #container target_value
    custom_origin_host_header: 
      - "dev1.virtues.agency"
    healthcheck_endpoint: "/" 
    health_check_enabled : true
    envs:
      - name : "ENV_NAME"
        value : "Test-apache"

    secrets: 
      - name : "DB_PASSWORD"
        valueFrom : "arn:aws:secretsmanager:ap-southeast-1:711387124065:secret:APACHE_SVC_SECRETS_-taI3x2"

    tags:
      - name: 
        key:
      - name:
        key:

ecs_task_min_count: 1
ecs_task_max_count: 10
ecs_task_deployment_minimum_healthy_percent: 100
ecs_task_deployment_maximum_percent: 200
maximum_scaling_step_size: 1
minimum_scaling_step_size: 1
target_capacity: 100 #ec2 autoscalling 

# Cloudwatch
retention_in_days: 7

# Autoscaling Group
autoscaling_max_size: 6
autoscaling_min_size: 1
desired_capacity: 1

# ALB
healthcheck_matcher: "200"
aws_acm_certificate_arn: "arn:aws:acm:ap-southeast-1:711387124065:certificate/50a1d91f-b79c-4565-8e4f-fd6e0cc8e7b2"
launch_type: "EC2"
enable_cross_zone_load_balancing : true

tags: 
  Terraform : "true"




